@model List<LoanListViewModel>
@{
    int i = 1;
    
}

<div class="TamSayfaCerceveAlaniUser">
    <div class="TamSayfaCerceveSinirlamaAlaniUser">
        <div class="TamSayfaCerceveAlaniIciYuzdeYuzlukAlan">
            <div class="TamSayfaCerceveAlaniIciAltiCizgiliBaslikAlaniUser">
                <div class="TamSayfaCerceveAlaniIciAltiCizgiliBaslikAlaniUstBaslikMetniUser">
                    Hesabım &#8250; Ödünç Aldığım Kitaplar
                </div>
                <div style="float:right; margin-left:15px;">
                    <button class="FormElemanlariYesilButonlar">Borcumu Öde</button>
                </div>
                <div style="float:right; font-size:18px;">
                    Borçlarım: @await Component.InvokeAsync("Fine")
                </div>
            </div>
            <div class="TamSayfaCerceveAlaniIciHesapMenuleriAlaniUser">
                <div class="TamSayfaCerceveAlaniIciHesapMenuleriDengelemeAlaniUser">
                    <div class="TamSayfaCerceveAlaniIciHesapMenuleriAlaniUser">
                <div class="TamSayfaCerceveAlaniIciHesapMenuleriDengelemeAlaniUser">
                    <div class="TamSayfaCerceveAlaniIciHesapMenusuSinirlamaAlaniUser">
                        <div class="TamSayfaCerceveAlaniIciHesapTumMenulerinMetinAlaniUser">
                            <div class="TamSayfaCerceveAlaniIciHesapTumMenulerinMetniUser">
                                <a asp-action="Index" asp-controller="Loan">Ödünç Aldığım Kitaplar</a>
                            </div>
                        </div>
                    </div>
                    <div class="TamSayfaCerceveAlaniIciHesapMenusuSinirlamaAlaniUser">
                        <div class="TamSayfaCerceveAlaniIciHesapTumMenulerinMetinAlaniUser">
                            <div class="TamSayfaCerceveAlaniIciHesapTumMenulerinMetniUser">
                                <a asp-action="Index" asp-controller="Info">Bilgilerim</a>
                            </div>
                        </div>
                    </div>
                    <div class="TamSayfaCerceveAlaniIciHesapMenusuSinirlamaAlaniUser">
                        <div class="TamSayfaCerceveAlaniIciHesapTumMenulerinMetinAlaniUser">
                            <div class="TamSayfaCerceveAlaniIciHesapTumMenulerinMetniUser">
                                <a asp-action="Update" asp-controller="Info">Şifre Değiştirme</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
                </div>
            </div>
            @*<div class="TamSayfaSagSutunIciAramaAlani">
                <form action="Erkek-Ayakkabilari.html" method="post">
                    <div class="TamSayfaSagSutunIciAramaAlaniButonlarIcinKapsamaAlani"><input type="submit" value="" class="TamSayfaSagSutunIciAramaAlaniAramaYapButonlari"></div>
                    <div class="TamSayfaSagSutunIciSeciliIcinKapsamaAlani" >
                        <div class="titleContent" style="padding:8px 7px; width:100%; position:relative;">
                            <div class="titContent">Dil</div>
                            <div style="display:none; border:1px solid #ccc; height:auto; width:calc(100% + 3px); z-index:95; position:absolute; top:34px; left:0px; background:#fff; padding:4px;" >
                                <div class="seciliTitleDiv">
                                    <button class="seciliTitleButton">ISBN No</button>
                                </div>
                                <div class="seciliTitleDiv">
                                    <button class="seciliTitleButton">ISBN No</button>
                                </div>
                                <div class="seciliTitleDiv">
                                    <button class="seciliTitleButton">ISBN No</button>
                                </div>
                                <div class="seciliTitleDiv">
                                    <button class="seciliTitleButton">ISBN No</button>
                                </div>
                            </div>
                        </div>
                        <div class="filtreBtn" style="top:10px; right:10px; height:12px;"><i class="fa-solid fa-caret-down" style="position:absolute; display:none; left:4px;" ></i><i class="fa-solid fa-caret-up" style="position:absolute; display:inline-block; left:4px;"></i></div>
                    </div>
                    <div class="TamSayfaSagSutunIciAramaAlaniInputAlanlariKapsayicisi"><input type="text" name="Arama" class="TamSayfaSagSutunIciAramaAlaniTextInputlari"></div>
                </form>
            </div>*@
            <div class="TamSayfaSagSutunIciTableSinirlamaAlaniUser">
                  <div style="display:block; border:solid 1px rgba(0,0,0,0.2); overflow:hidden; margin-left:-9px;">

        <table class="table table-striped table-hover" style="font-size:13px;">
            <thead >
                <tr class="tableUst">
                    <th class="tableId" style="background:#36304a; color:white;">ID</th>
                    <th class="tableResim" style="background:#36304a;"></th>
                    <th class="tableBaslik" style="background:#36304a; color:white;">Başlık</th>
                    <th class="tableOduncTarihi" style="background:#36304a; color:white;">Ödünç Aldığım Tarih</th>
                    <th class="tableSonIadeEtmeTarihi" style="background:#36304a; color:white;">Son İade Etme Tarihi</th>
                    <th class="tableIadeEttigimTarihi" style="background:#36304a; color:white;">İade Ettiğim Tarih</th>
                    <th class="tableDurum" style="background:#36304a; color:white;">Durum</th>
                </tr>
            </thead>
            <tbody>
                
                @foreach(var loanList in Model)
                {
                    <tr>
                        <td>@i</td>
                        <td>
                            <img src="@loanList.Book.Resim" style="width:100%; height:100%;"/>
                        </td>
                        <td>@loanList.Book.Title</td>
                        <td>@loanList.Loan.LoanDate</td>
                        <td>@loanList.Loan.LastReturnDate</td>
                        <td>@loanList.Loan.ReturnedDate</td>
                        @if(loanList.Loan.ReturnedDate is not null)
                        {
                            @if(loanList.Loan.ReturnedDate.Equals("30 gün içinde iade etmediniz."))
                            {
                                            <td>İade etmediğiniz için borcunu ödemelisiniz</td>
                                        }
                                        else if(loanList.Loan.ReturnedDate.Equals(" gün geç iade ettiniz.)"))
                                        {
                                <td>Geç iade ettiğiniz için borcunu ödemelisiniz</td>
                                            
                                        }
                                        else
                                        {
                                <td>Kitap kütüphaneye iade edildi</td>
                                            
                                        }
                                    }
                        else if(loanList.Loan.LoanDate is not null)
                        {
                            <td>Son iade etme tarihinden önce kitap iade edilmeli</td>
                        }
                        else if (loanList.Loan.IsOrder)
                        {
                            <td>Size kargo tarafından en kısa zamanda kitap getirilecek <br /> Sipariş No: @loanList.OrderNo</td>
                        }
                        else
                        {
                            <td>Kütüphanede personelle görüşerek kitabı almalısın</td>
                        }
                        @*<td>
                            @if (loanList.Loan.IsOrder)
                            {
                                <td></td>    
                            }
                            else{
                            }
                            <form method="post" asp-action="Return" >
                                <input type="hidden" name="id" value="@loanList.Loan.LoanId"/>
                                <button type="submit" class="btn btn-primary" disabled="@loanList.Loan.ReturnedDate">
                                    @if (@loanList.Loan.ReturnedDate is null)
                                    {
                                        <div>İade Et</div>
                                    }
                                    else if(@loanList.Loan.ReturnedDate.Contains("30 gün içinde iade etmediniz."))
                                    {
                                        <div>Uyarı</div>
                                    }
                                    else
                                    {
                                        <div>İade Edildi</div>
                                    }
                                </button>
                            </form>
                        </td>*@
                    </tr>
                    if (true)
                        i++;
                }
            </tbody>
        </table>
        </div>  
            </div>
        </div>
    </div>
</div>

@*<div class="text-center my-3 border-bottom">
        <div class="my-3 text-center" style="font-size:20px; font-weight:bold; background:rgba(200,200,200,0.1); width:240px; margin:0 auto; border-radius:6px; padding:12px; border:solid 1px; ">Ödünç Aldığınız Kitaplar</div>
        <div class="d-flex justify-content-end my-3" style="font-size:17px;">
        Borçlarım : @await Component.InvokeAsync("Fine") TL
    </div>
    <div class="d-flex justify-content-end my-3" style="font-size:17px;">
        <a class="btn btn-primary" style="width:134px;">Borcu Öde</a>
    </div>
</div>*@
@*<div class="text-center my-3 border-bottom" style="display:flex;">
        <div class="my-3 text-center" style="font-size:20px; font-weight:bold; background:rgba(255,255,255,0.7); width:240px; margin:0 auto; border-radius:6px; padding:12px; border:solid 1px; ">Ödünç Aldığınız Kitaplar</div>
        <div style="border:solid 1px rgba(0,0,0,0.5); border-radius:10px; padding:3px 17px; background:rgba(255,255,255,0.7);">

        
        <div  class="d-flex justify-content-end my-3" style="font-size:17px;">
        Borçlarım : @await Component.InvokeAsync("Fine") TL
    </div>
    <div class="d-flex justify-content-end my-3" style="font-size:17px;">
        <a class="btn btn-primary" style="width:134px;">Borcu Öde</a>
    </div>
    </div>
</div>

<div class="text-center">
    <div class="my-3">
        <div style="display:flex; border:solid 1px black; height:35px; width:457px;">
            <div style="display:flex; align-items:center; overflow:hidden; background:white; width:221px;">
                <i class="fa-sharp fa-thin fa-magnifying-glass" style="color:#e5e5e5; padding:6px; font-size:14px;"  ></i>
                <input class="filtreInput" type="text" name="inKategori" />
            </div>
            <div style="border:solid 1px black; width:194px; text-align:left; background:rgba(255,255,255,0.8); position:relative; padding:3px; padding-left:7px;">ISBN Numarası <i style="position:absolute; display:inline-block; right:7px; top:25%;" class="fa-solid fa-caret-down" style="position:absolute; display:inline-block;" ></i></div>
            <div><button type="submit" style="height:34px;">Ara</button></div>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-12">
        <div style="display:block; border-radius:8px; border:solid 1px rgba(0,0,0,0.2); overflow:hidden; margin-left:-9px;">

        <table class="table table-striped table-hover" style="font-size:13px;">
            <thead>
                <tr>
                    <th style="background:#36304a; color:white;">ID</th>
                    <th style="background:#36304a;"></th>
                    <th style="background:#36304a; color:white;">Başlık</th>
                    <th style="background:#36304a; color:white;">Ödünç Aldığım Tarih</th>
                    <th style="background:#36304a; color:white;">Son İade Etme Tarihi</th>
                    <th style="background:#36304a; color:white;">İade Ettiğim Tarih</th>
                    <th style="background:#36304a; color:white;">Durum</th>
                </tr>
            </thead>
            <tbody>
                
                @foreach(var loanList in Model)
                {
                    <tr>
                        <td>@i</td>
                        <td>
                            <img src=~/images/calikusu.jpg  class="img-fluid" style="width:60px; height:60px;"/>
                        </td>
                        <td>@loanList.Book.Title</td>
                        <td>@loanList.Loan.LoanDate</td>
                        <td>@loanList.Loan.LastReturnDate</td>
                        <td>@loanList.Loan.ReturnedDate</td>
                        @if(loanList.Loan.ReturnedDate is not null)
                        {
                            @if(loanList.Loan.ReturnedDate.Equals("30 gün içinde iade etmediniz."))
                            {
                                <td>Geç iade ettiğiniz için borcunu ödemelisiniz</td>
                            }
                            else
                            {
                                <td>Kitap kütüphaneye iade edildi</td>
                            }
                        }
                        else if(loanList.Loan.LoanDate is not null)
                        {
                            <td>Son iade etme tarihinden önce kitap iade edilmeli</td>
                        }
                        else if (loanList.Loan.IsOrder)
                        {
                            <td>Size kargo tarafından en kısa zamanda kitap getirilecek</td>
                        }
                        else
                        {
                            <td>Kütüphanede personelle görüşerek kitabı almalısın</td>
                        }
                    </tr>
                    if (true)
                        i++;
                }
            </tbody>
        </table>
        </div>
    </div>
</div>
*@